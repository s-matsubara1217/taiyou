const targets=[].slice.call(document.querySelectorAll(".lazyimg")),img_path="data-src",options={root:null,rootMargin:"50%",threshold:0},observer=new IntersectionObserver(callback,options);function callback(t,e){t.forEach(function(t,o){if(!t.isIntersecting)return;const r=t.target;loading(r),e.unobserve(r)})}function loading(t){if("PICTURE"===t.nodeName){[].slice.call(t.children).forEach(function(t){const e=t.getAttribute(img_path);"IMG"===t.nodeName&&e?t.src=e:"SOURCE"===t.nodeName&&e&&(t.srcset=e),t.removeAttribute(img_path)})}else if("IMG"===t.nodeName){const e=t.getAttribute(img_path);e&&(t.src=e,t.onload=function(){this.removeAttribute(img_path)})}else{const e=t.getAttribute(img_path);e&&(t.style.backgroundImage="url("+e+")",t.onload=function(){this.removeAttribute(img_path)})}t.removeAttribute(img_path)}targets.forEach(function(t){observer.observe(t)});